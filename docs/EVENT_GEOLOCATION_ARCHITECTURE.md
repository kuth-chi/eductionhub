# Event Geolocation Architecture

## ğŸ—ºï¸ System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER DEVICE                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Browser / Mobile App                                      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  1. Request Location Permission                            â”‚ â”‚
â”‚  â”‚     navigator.geolocation.getCurrentPosition()             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  2. Get User Coordinates                                   â”‚ â”‚
â”‚  â”‚     âœ“ Latitude: 11.5564                                    â”‚ â”‚
â”‚  â”‚     âœ“ Longitude: 104.9282                                  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  3. Display "Find Events Near Me" Button                   â”‚ â”‚
â”‚  â”‚     ğŸ“ [Find Events Nearby]                                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                    HTTP GET REQUEST
     /api/v1/events/nearby/?latitude=11.5564&longitude=104.9282&radius_km=50
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                              â”‚
â”‚                            â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  EventViewSet.nearby() Action                              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  1. Receive coordinates from request                       â”‚ â”‚
â”‚  â”‚     user_lat = 11.5564                                     â”‚ â”‚
â”‚  â”‚     user_lon = 104.9282                                    â”‚ â”‚
â”‚  â”‚     radius_km = 50                                         â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  2. Calculate bounding box                                 â”‚ â”‚
â”‚  â”‚     lat_range = radius_km / 111  (â‰ˆ0.45 degrees)          â”‚ â”‚
â”‚  â”‚     lon_range = radius_km / 111                            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  3. Query database with filters                            â”‚ â”‚
â”‚  â”‚     WHERE latitude BETWEEN (user_lat - range)              â”‚ â”‚
â”‚  â”‚       AND longitude BETWEEN (user_lon - range)             â”‚ â”‚
â”‚  â”‚       AND status = 'published'                             â”‚ â”‚
â”‚  â”‚       AND visibility = 'public'                            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  DATABASE (PostgreSQL)                                     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Events Table:                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ id â”‚ title        â”‚ latitude  â”‚ longitude â”‚ status  â”‚  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â”‚
â”‚  â”‚  â”‚ 1  â”‚ Supply Drive â”‚ 11.577990 â”‚ 104.89341 â”‚ pub...  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 2  â”‚ Health Camp  â”‚ 11.550000 â”‚ 104.92000 â”‚ pub...  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 3  â”‚ Workshop     â”‚ 11.600000 â”‚ 104.95000 â”‚ pub...  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Index on (latitude, longitude) for fast queries!          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Distance Calculation (for each result)                    â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Haversine Formula:                                        â”‚ â”‚
â”‚  â”‚  d = 2 * R * arcsin(âˆš(sinÂ²(Î”lat/2) + cos(lat1) * cos(lat2)â”‚ â”‚
â”‚  â”‚                       * sinÂ²(Î”lon/2)))                     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Results:                                                  â”‚ â”‚
â”‚  â”‚  â€¢ Event 1: 2.5 km away                                    â”‚ â”‚
â”‚  â”‚  â€¢ Event 2: 5.8 km away                                    â”‚ â”‚
â”‚  â”‚  â€¢ Event 3: 12.3 km away                                   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                    JSON RESPONSE
       [
         {
           "id": 1,
           "title": "School Supply Drive",
           "latitude": 11.577990,
           "longitude": 104.893410,
           "distance_km": 2.5,
           "location_name": "Community Center",
           ...
         },
         ...
       ]
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND DISPLAY                            â”‚
â”‚                            â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Event List / Map View                                     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ“ School Supply Drive                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    Tuol Kork Community Center                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    ğŸ“ 2.5 km away                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    ğŸ—“ï¸ Dec 15, 2025                                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    [View Details] [Get Directions]                   â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ“ Health Checkup Camp                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    City Health Center                                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    ğŸ“ 5.8 km away                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    ğŸ—“ï¸ Dec 20, 2025                                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    [View Details] [Get Directions]                   â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ—ºï¸ Map View:                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚         [ğŸ“User]                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚            â†“ 2.5km                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚         [ğŸ“Event1]                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              [ğŸ“Event2] â† 5.8km                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow for Creating Event with Location

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EVENT ORGANIZER                               â”‚
â”‚                                                                   â”‚
â”‚  1. Opens "Create Event" Form                                    â”‚
â”‚                                                                   â”‚
â”‚  2. Fills basic details (title, description, date)               â”‚
â”‚                                                                   â”‚
â”‚  3. LOCATION SECTION:                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚  Option A: Use Address Autocomplete                    â”‚  â”‚
â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚     â”‚  â”‚ ğŸ” [Tuol Kork Community Center___________]       â”‚  â”‚  â”‚
â”‚     â”‚  â”‚                                                   â”‚  â”‚  â”‚
â”‚     â”‚  â”‚ Suggestions:                                      â”‚  â”‚  â”‚
â”‚     â”‚  â”‚ â€¢ Tuol Kork Community Center, Phnom Penh         â”‚  â”‚  â”‚
â”‚     â”‚  â”‚ â€¢ Tuol Kork High School                          â”‚  â”‚  â”‚
â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚     â”‚                                                         â”‚  â”‚
â”‚     â”‚  Auto-fills:                                            â”‚  â”‚
â”‚     â”‚  â€¢ Address: Street 289, Tuol Kork                      â”‚  â”‚
â”‚     â”‚  â€¢ City: Phnom Penh                                    â”‚  â”‚
â”‚     â”‚  â€¢ Latitude: 11.577990                                 â”‚  â”‚
â”‚     â”‚  â€¢ Longitude: 104.893410                               â”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           OR                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚  Option B: Use Current Location                        â”‚  â”‚
â”‚     â”‚  [ğŸ“ Use My Current Location]                          â”‚  â”‚
â”‚     â”‚                                                         â”‚  â”‚
â”‚     â”‚  Automatically gets device coordinates                  â”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           OR                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚  Option C: Manual Entry                                â”‚  â”‚
â”‚     â”‚  Latitude:  [11.577990_______]                         â”‚  â”‚
â”‚     â”‚  Longitude: [104.893410______]                         â”‚  â”‚
â”‚     â”‚  (User can copy from Google Maps)                      â”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  4. Preview on map before submitting                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚  Map Preview:                                           â”‚  â”‚
â”‚     â”‚  [  ğŸ—ºï¸  Shows marker at selected location  ]           â”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  5. Submit â†’ POST /api/v1/events/                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ Integration Points

### 1. Google Maps API (Recommended)
```javascript
// Address Autocomplete
const autocomplete = new google.maps.places.Autocomplete(input);

autocomplete.addListener('place_changed', () => {
  const place = autocomplete.getPlace();
  
  // Get coordinates
  const lat = place.geometry.location.lat();
  const lon = place.geometry.location.lng();
  
  // Get formatted address
  const address = place.formatted_address;
  
  // Update form fields
  setEventData({
    ...eventData,
    latitude: lat,
    longitude: lon,
    address_line_1: address,
  });
});
```

### 2. Mapbox API (Alternative)
```javascript
// Mapbox Geocoding
const response = await fetch(
  `https://api.mapbox.com/geocoding/v5/mapbox.places/${query}.json?access_token=${token}`
);

const data = await response.json();
const [lon, lat] = data.features[0].center;
```

### 3. Browser Geolocation API (Built-in)
```javascript
// Get user's current location
navigator.geolocation.getCurrentPosition(
  (position) => {
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;
    
    setUserLocation({ lat, lon });
  },
  (error) => console.error(error),
  { enableHighAccuracy: true }
);
```

## ğŸ“Š Database Schema (Geolocation Fields)

```sql
CREATE TABLE event_event (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    
    -- Geolocation fields
    latitude DECIMAL(9,6),          -- e.g., 11.577990
    longitude DECIMAL(9,6),         -- e.g., 104.893410
    location_name VARCHAR(255),     -- "Community Center"
    address_line_1 VARCHAR(255),    -- "Street 289, Tuol Kork"
    address_line_2 VARCHAR(255),
    postal_code VARCHAR(20),
    
    -- Administrative hierarchy (for filtering)
    country_id INTEGER REFERENCES geo_country(id),
    state_id INTEGER REFERENCES geo_state(id),
    city_id INTEGER REFERENCES geo_city(id),
    village_id INTEGER REFERENCES geo_village(id),
    
    -- Virtual event option
    is_virtual BOOLEAN DEFAULT FALSE,
    virtual_meeting_url TEXT,
    
    -- Other fields...
    status VARCHAR(20),
    created_at TIMESTAMP,
    ...
);

-- IMPORTANT: Create indexes for fast geolocation queries
CREATE INDEX idx_event_coordinates ON event_event(latitude, longitude);
CREATE INDEX idx_event_location ON event_event(country_id, state_id, city_id);
```

## ğŸ¯ Use Cases Visualization

### Use Case 1: Student Finding Study Group Event
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Student's Phone (Phnom Penh)                                 â”‚
â”‚                                                               â”‚
â”‚ 1. Opens app â†’ "Events"                                      â”‚
â”‚ 2. Taps "Near Me" ğŸ“                                         â”‚
â”‚ 3. App requests location permission                          â”‚
â”‚ 4. Gets coordinates: 11.5564, 104.9282                       â”‚
â”‚ 5. Shows loading: "Finding events nearby..."                 â”‚
â”‚                                                               â”‚
â”‚ Results (sorted by distance):                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ“š Math Study Group                                   â”‚   â”‚
â”‚ â”‚ ğŸ“ 2.1 km â€¢ Tomorrow 4PM                              â”‚   â”‚
â”‚ â”‚ [Register] [Directions]                               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ“š English Workshop                                   â”‚   â”‚
â”‚ â”‚ ğŸ“ 4.5 km â€¢ Friday 3PM                                â”‚   â”‚
â”‚ â”‚ [Register] [Directions]                               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚ âœ… User finds and joins nearby study group!                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Use Case 2: NGO Organizing Charity Event
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NGO Coordinator's Computer                                   â”‚
â”‚                                                               â”‚
â”‚ 1. Navigate to "Create Event"                                â”‚
â”‚ 2. Fill details:                                             â”‚
â”‚    â€¢ Title: "School Supply Donation"                         â”‚
â”‚    â€¢ Type: Charity Event                                     â”‚
â”‚    â€¢ Date: Dec 15, 2025                                      â”‚
â”‚                                                               â”‚
â”‚ 3. Location Section:                                         â”‚
â”‚    Option A: Search address                                  â”‚
â”‚    ğŸ” [Rural School, Kampong Cham______]                     â”‚
â”‚        â†’ Autocomplete suggests locations                     â”‚
â”‚        â†’ Selects "Kampong Cham Primary School"               â”‚
â”‚        â†’ Auto-fills lat/lon: 12.1337, 105.4640              â”‚
â”‚                                                               â”‚
â”‚ 4. Map Preview shows exact location                          â”‚
â”‚ 5. Add sponsors, set funding goal, upload photos             â”‚
â”‚ 6. Publish event                                             â”‚
â”‚                                                               â”‚
â”‚ Result:                                                       â”‚
â”‚ â€¢ Event visible on map                                       â”‚
â”‚ â€¢ Nearby users get notifications                             â”‚
â”‚ â€¢ Sponsors can see location                                  â”‚
â”‚ â€¢ Easy to share with Google Maps link                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Privacy & Security

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Privacy Considerations                                        â”‚
â”‚                                                               â”‚
â”‚ User Location:                                               â”‚
â”‚ âœ“ Never stored on server                                     â”‚
â”‚ âœ“ Only sent for "nearby" queries                             â”‚
â”‚ âœ“ User must grant permission                                 â”‚
â”‚                                                               â”‚
â”‚ Event Location:                                              â”‚
â”‚ âœ“ Public events: Full coordinates visible                    â”‚
â”‚ âœ“ Private events: Only visible to registered participants    â”‚
â”‚ âœ“ Organizer can choose precision level                       â”‚
â”‚   (exact address vs. general area)                           â”‚
â”‚                                                               â”‚
â”‚ Best Practices:                                              â”‚
â”‚ â€¢ Use HTTPS for geolocation API calls                        â”‚
â”‚ â€¢ Don't track user movement                                  â”‚
â”‚ â€¢ Clear location data after query                            â”‚
â”‚ â€¢ Respect user's "Don't share location" choice               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Optimization Strategies                                       â”‚
â”‚                                                               â”‚
â”‚ 1. Database Indexes                                          â”‚
â”‚    CREATE INDEX ON event_event(latitude, longitude);         â”‚
â”‚    â€¢ Speeds up geospatial queries                            â”‚
â”‚                                                               â”‚
â”‚ 2. Caching                                                   â”‚
â”‚    â€¢ Cache popular locations (cities)                        â”‚
â”‚    â€¢ Cache nearby results for 5-10 minutes                   â”‚
â”‚                                                               â”‚
â”‚ 3. Use PostGIS (PostgreSQL Extension)                        â”‚
â”‚    SELECT *, ST_Distance(                                    â”‚
â”‚      ST_MakePoint(longitude, latitude),                      â”‚
â”‚      ST_MakePoint(user_lon, user_lat)                        â”‚
â”‚    ) AS distance                                             â”‚
â”‚    FROM event_event                                          â”‚
â”‚    WHERE ST_DWithin(...)                                     â”‚
â”‚    ORDER BY distance;                                        â”‚
â”‚                                                               â”‚
â”‚ 4. Pagination                                                â”‚
â”‚    â€¢ Limit results to 20-50 per page                         â”‚
â”‚    â€¢ Load more as user scrolls                               â”‚
â”‚                                                               â”‚
â”‚ 5. Client-side Distance Calculation                          â”‚
â”‚    â€¢ Calculate distance in browser for display               â”‚
â”‚    â€¢ Reduces server load                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This architecture makes your event management system truly user-friendly with powerful location-based discovery! ğŸš€ğŸ—ºï¸**
